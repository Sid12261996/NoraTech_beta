<app-header></app-header>

<div class="fill">



  <mat-horizontal-stepper #stepper linear="true">
    <mat-step [stepControl]="firstFormGroup" >
      <form [formGroup]="firstFormGroup">
        <ng-template matStepLabel>Fill your details</ng-template>


        <div class="d-flex justify-content-start label-1">
          <label>
            <h4>Fill Details:</h4>
          </label>
        </div>

        <div class="row d-flex justify-content-center">
          <mat-form-field class="col-md-4">
            <input matInput placeholder="First name" formControlName="firstName" required>

            <mat-error
              *ngIf="firstFormGroup.controls['firstName'].hasError('required') && firstFormGroup.controls['firstName'].touched">


              First name is required
            </mat-error>
          </mat-form-field>

          <mat-form-field class="col-md-4">
            <input matInput placeholder="Last name" formControlName="lastName" required>

            <mat-error
              *ngIf="firstFormGroup.controls['lastName'].hasError('required') && firstFormGroup.controls['lastName'].touched">

              Last name is required
            </mat-error>
          </mat-form-field>
        </div>

        <div class="row d-flex justify-content-center">
          <mat-form-field class="col-md-4">
            <input matInput placeholder="Course Selected" formControlName="registeredFor" required readonly>
          </mat-form-field>

          <mat-form-field class="col-md-4">
            <input matInput placeholder="Email" formControlName="contactEmail" required>
            <mat-error
              *ngIf="firstFormGroup.controls['contactEmail'].dirty && firstFormGroup.controls['contactEmail'].touched">
              Please enter a valid Email
            </mat-error>
            <mat-error
              *ngIf="firstFormGroup.controls['contactEmail'].hasError('required') && firstFormGroup.controls['contactEmail'].touched">
              Please fill this field
            </mat-error>
          </mat-form-field>
        </div>

        <div class="row d-flex justify-content-center">
          <mat-form-field class="col-md-4">
            <input matInput placeholder="Amount Paid" formControlName="amountPaid" required readonly>

          </mat-form-field>

          <mat-form-field class="col-md-4">
            <input matInput type="number" placeholder="Contact Number" formControlName="contactNumber" required>
            <mat-error
              *ngIf="firstFormGroup.controls['contactNumber'].hasError('phoneNumber') && firstFormGroup.controls['contactNumber'].touched">
              Please Enter valid mobile Number (should be 10 numbers)
            </mat-error>
            <mat-error
              *ngIf="firstFormGroup.controls['contactNumber'].hasError('required') && firstFormGroup.controls['contactNumber'].touched">
              Mobile Number is required
            </mat-error>
          </mat-form-field>
        </div>

        <!-- <div class="row d-flex justify-content-center">
        <mat-form-field class="col-md-4">
          <input matInput placeholder="Contact Number" formControlName="contactNumber" required>
        </mat-form-field>

        <mat-form-field class="col-md-4">
          <input matInput placeholder="Contact Number" formControlName="contactNumber" required>
        </mat-form-field>
        </div> -->

        <div class="d-flex justify-content-end frm-btn">
          <button matStepperNext (click)="getOrderId()" class="d-flex justify-content-center"><i
              class="material-icons">send</i></button>
        </div>
      </form>
    </mat-step>

    <mat-step [editable]="false">

      <form [formGroup]="secondFormGroup">
        <ng-template matStepLabel>Preview</ng-template>
        <!-- <mat-form-field>
          <input matInput placeholder="just some fields" formControlName="secondCtrl" required>
        </mat-form-field> -->
        <div class="row justify-content-center">
            <div class="col-md-6 m-4">
              <mat-card class="mat-card">
                <mat-card-header class="prev-title">
                  <mat-card-title><h4>Preview Details:</h4></mat-card-title>
                </mat-card-header>
                <mat-card-content>
                  <div class="table-responsive table-borderless">
                    <table class="table">
                      <tbody>
                        <tr>
                          <th>
                            <mat-label>Name: </mat-label>
                          </th>
                          <td>
                            <mat-label readonly>{{firstForm.firstName}} {{firstForm.lastName}}</mat-label>
                          </td>
                        </tr>
                        <tr>
                          <th>
                            <mat-label>Course Selected :</mat-label>
                          </th>
                          <td>
                            <mat-label readonly>{{firstForm.registeredFor}}</mat-label>
                          </td>
                        </tr>
                        <tr>
                          <th>
                            <mat-label>Email: </mat-label>
                          </th>
                          <td>
                            <mat-label readonly>{{firstForm.contactEmail}}</mat-label>
                          </td>
                        </tr>
                        <tr>
                          <th>
                            <mat-label>Amount Paid : </mat-label>
                          </th>
                          <td>
                            <mat-label readonly>{{firstForm.amountPaid}}</mat-label>
                          </td>
                        </tr>
                        <tr>
                          <th>
                            <mat-label>Contact no : </mat-label>
                          </th>
                          <td>
                            <mat-label readonly>{{firstForm.contactNumber}}</mat-label>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </mat-card-content>
              </mat-card>
            </div>
        </div>

        <div class="form2btn">
            <button mat-button matStepperPrevious class="editbtn">Edit</button>

            <button mat-button matStepperNext class="proceedbtn">Proceed</button>
        </div>
        <div>


        </div>
      </form>
    </mat-step>

    <mat-step>
      <ng-template matStepLabel>Payment</ng-template>


      <div class="col-md-12">
        <div class="row justify-content-center">
                  <div class="col-md-4 m-4">
                    <mat-card class="mat-card">
                      <mat-card-header>
                        <mat-card-title><h4>Choose Payment Mode:</h4></mat-card-title>
                      </mat-card-header>
                      <mat-card-content>
                        <!--        <p *ngFor="let paymentOption of allPaymentOptions|keyvalue">-->
                        <!--          <mat-checkbox>{{paymentOption.key}}-->
                  
                        <!--          </mat-checkbox>-->
                        <!--        </p>-->
                  
                        <!--        <mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree">-->
                        <!--          &lt;!&ndash; This is the tree node template for leaf nodes &ndash;&gt;-->
                        <!--          <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>-->
                        <!--            <li class="mat-tree-node">-->
                        <!--              &lt;!&ndash; use a disabled button to provide padding for tree leaf &ndash;&gt;-->
                        <!--              <button mat-icon-button disabled></button>-->
                        <!--              <mat-radio-group-->
                        <!--                aria-labelledby="example-radio-group-label"-->
                        <!--               [formControl]='paymentModeCheckbox'>-->
                        <!--                <mat-radio-button class="example-radio-button"-->
                        <!--                                  [value]="node.name">{{node.name}}</mat-radio-button>-->
                        <!--              </mat-radio-group>-->
                        <!--            </li>-->
                        <!--          </mat-tree-node>-->
                        <!--          &lt;!&ndash; This is the tree node template for expandable nodes &ndash;&gt;-->
                        <!--          <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">-->
                        <!--            <li>-->
                        <!--              <div class="mat-tree-node">-->
                        <!--                <button mat-icon-button matTreeNodeToggle-->
                        <!--                        [attr.aria-label]="'toggle ' + node.name">-->
                        <!--                  <mat-icon class="mat-icon-rtl-mirror">-->
                        <!--                    {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}-->
                        <!--                  </mat-icon>-->
                        <!--                </button>-->
                        <!--                {{node.name}}-->
                        <!--              </div>-->
                        <!--              <ul [class.example-tree-invisible]="!treeControl.isExpanded(node)">-->
                        <!--                <ng-container matTreeNodeOutlet></ng-container>-->
                        <!--              </ul>-->
                        <!--            </li>-->
                        <!--          </mat-nested-tree-node>-->
                        <!--        </mat-tree>-->
                  
                  
                        <!--        <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">-->
                        <!--          <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle matTreeNodePadding>-->
                        <!--            <button mat-icon-button disabled></button>-->
                        <!--            <mat-radio-group-->
                        <!--                              aria-labelledby="example-radio-group-label"-->
                        <!--                             [formControl]='paymentModeCheckbox'>-->
                        <!--              <mat-radio-button class="checklist-leaf-node"-->
                        <!--                            [checked]="checklistSelection.isSelected(node)"-->
                        <!--                            (change)="todoLeafItemSelectionToggle(node)" [value]="node.item">{{node.item}}</mat-radio-button>-->
                        <!--                            </mat-radio-group>-->
                       <mat-radio-group [formControl]='paymentModeCheckbox'>

          <ul class="ul-list">

            <li>
              <div class="head">
              <strong>Cards:</strong><br>
              <mat-radio-button color="primary" checked value="Ncard" (click)="knowThePaymentMode('Ncard')">National</mat-radio-button>
              <mat-radio-button color="primary" value="Icard" (click)="knowThePaymentMode('Icard')">International</mat-radio-button>
              </div>
            </li>

            <li>
              <div class="head">
              <strong>Net Banking:</strong><br>
              <mat-radio-button color="primary" value="Nnet" (click)="knowThePaymentMode('Nnet')">National</mat-radio-button>
              <mat-radio-button color="primary" value="Inet" (click)="knowThePaymentMode('Inet')">International</mat-radio-button>
              </div>
            </li>
            <li>
              <mat-radio-button color="primary" value="wallet" (click)="knowThePaymentMode('wallet')">Wallet</mat-radio-button>
            </li>

            <li>
              <mat-radio-button color="primary" value="emi" (click)="knowThePaymentMode('emi')">EMI</mat-radio-button>
            </li>

            <li>
              <mat-radio-button color="primary" value="upi" (click)="knowThePaymentMode('upi')">UPI</mat-radio-button>
            </li>

          </ul>
        </mat-radio-group>
                      </mat-card-content>
                    </mat-card>
                  </div>

                  <div class="col-md-4 m-4">
                    <mat-card class="mat-card">
                      <mat-card-header>
                        <mat-card-title><h4>Payment Details:</h4></mat-card-title>
                      </mat-card-header>
                      <mat-card-content>
                        <div class="table-responsive table-borderless">
                          <table class="table">
                            <tbody>
                              <tr>
                                <th>
                                  <mat-label>Amount</mat-label>
                                </th>
                                <td>
                                  <mat-label readonly>Rs. {{setPrice()}}</mat-label>
                                </td>
                              </tr>
                              <tr>
                                <th>
                                  <mat-label>Covenience Charges</mat-label>
                                </th>
                                <td>
                                  <mat-label readonly>Rs. {{convenienceCharges}}</mat-label>
                                </td>
                              </tr>
                              <tr>
                                <th>
                                  <mat-label>Total Amount to be Paid</mat-label>
                                </th>
                                <td>
                                  <mat-label readonly>Rs. {{amountSummingConenienceFees}}</mat-label>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </mat-card-content>
                    </mat-card>
                  </div>
                  </div>
                </div>


      <div class="form3btn">
        <button mat-raised-button routerLink="." id="rzp-button1" (click)="openCheckout()">Pay</button>


        <script type="text/javascript" src="https://checkout.razorpay.com/v1/razorpay.js"></script>
        <script type="text/javascript" src="../../../../razor.js"></script>

        <button mat-raised-button color="warn" matStepperPrevious (click)="decline()">Decline</button>
      </div>

    </mat-step>
  </mat-horizontal-stepper>

</div>